{
  "enabled": true,
  "name": "Code Quality Analyzer",
  "description": "Monitors source code files for changes and provides suggestions for code improvements including code smells, design patterns, best practices, readability, maintainability, and performance optimizations",
  "version": "1",
  "when": {
    "type": "fileEdited",
    "patterns": [
      "**/*.js",
      "**/*.html",
      "**/*.css",
      "**/*.json",
      "!**/node_modules/**",
      "!**/pb_data/**",
      "!**/dist/**",
      "!**/build/**"
    ]
  },
  "then": {
    "type": "askAgent",
    "prompt": "Analyse les fichiers modifiÃ©s pour dÃ©tecter les problÃ¨mes de qualitÃ© selon les standards BastaVerse :\n\n**1. Code Smells** :\n- Code dupliquÃ© (variables, animations, fonctions)\n- Fichiers > 800 lignes (dÃ©couper en composants)\n- Fonctions complexes (> 50 lignes)\n- Nommage incorrect (camelCase JS, kebab-case CSS/fichiers)\n\n**2. Standards du Projet** :\n- âŒ CSS dans fichiers JS (utiliser classes CSS)\n- âŒ `console.log()` (utiliser Winston Logger : `req.siteLogger`)\n- âŒ `innerHTML` avec donnÃ©es utilisateur (utiliser `textContent`)\n- âœ… Commentaires en franÃ§ais, code en anglais\n- âœ… Indentation : 4 espaces JS, 2 espaces HTML/CSS\n- âœ… SÃ©paration HTML/CSS/JS\n\n**3. Architecture** :\n- Structure modulaire respectÃ©e (components/, modules/, layout/)\n- Variables CSS centralisÃ©es dans `base.css`\n- Routes API dans `api/routes/routes-*.js`\n- Migrations PocketBase valides\n\n**4. Performance** :\n- Boucles imbriquÃ©es inutiles\n- Manipulation DOM inefficace\n- Fuites mÃ©moire potentielles\n- SÃ©lecteurs CSS trop spÃ©cifiques\n\n**5. MaintenabilitÃ©** :\n- Fonctions rÃ©utilisables\n- Documentation claire (JSDoc)\n- Gestion d'erreurs avec Winston Logger\n- Tests unitaires si pertinent\n\n**Format de RÃ©ponse** :\nğŸ”´ Critique : [problÃ¨me] â†’ [solution]\nğŸŸ  Important : [problÃ¨me] â†’ [suggestion]\nğŸŸ¡ AmÃ©lioration : [optimisation possible]\n\nPropose des corrections concrÃ¨tes et priorisÃ©es. Ne rapporte QUE les problÃ¨mes dÃ©tectÃ©s."
  }
}