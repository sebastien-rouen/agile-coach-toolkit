<!DOCTYPE html>
<html lang="fr" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ¯ Mission Tracker | Agile Coach Toolkit</title>
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="assets/img/logo.svg">
  
  <!-- Styles -->
  <link rel="stylesheet" href="assets/css/base.css">
  <link rel="stylesheet" href="assets/css/mission-tracker.css">
  <link rel="stylesheet" href="assets/css/timeline.css">
  <link rel="stylesheet" href="assets/css/report-templates.css">
  
  <!-- Shoelace (Web Components) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.19.1/cdn/themes/dark.css" />
  <script type="module" src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.19.1/cdn/shoelace-autoloader.js"></script>
  
  <!-- PocketBase SDK -->
  <script src="https://cdn.jsdelivr.net/npm/pocketbase@0.21.5/dist/pocketbase.umd.js"></script>
  
  <!-- Handlebars (Templates) -->
  <script src="https://cdn.jsdelivr.net/npm/handlebars@4.7.8/dist/handlebars.min.js"></script>
  
  <!-- jsPDF (Export PDF) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.2/jspdf.umd.min.js"></script>
  
  <!-- Marked (Markdown parser) -->
  <script src="https://cdn.jsdelivr.net/npm/marked@14.1.3/marked.min.js"></script>
</head>
<body>

  <!-- ========================================
       HEADER
  ======================================== -->
  
  <header class="mission-tracker-header">
    <div class="container">
      <div class="header-content">
        <!-- Logo et titre -->
        <div class="header-brand">
          <img src="assets/img/logo.svg" alt="Mission Tracker" class="header-logo">
          <div>
            <h1>Mission Tracker</h1>
            <p class="header-subtitle">Suivez vos missions, documentez vos apprentissages</p>
          </div>
        </div>

        <!-- Actions header -->
        <div class="header-actions">
          <button class="btn btn-primary" id="btn-new-mission">
            <sl-icon name="plus-circle"></sl-icon>
            Nouvelle mission
          </button>
          
          <sl-dropdown>
            <button slot="trigger" class="btn btn-icon" title="Actions">
              <sl-icon name="three-dots-vertical"></sl-icon>
            </button>
            <sl-menu>
              <sl-menu-item id="menu-load-demo">
                <sl-icon slot="prefix" name="play-circle"></sl-icon>
                Charger une dÃ©mo
              </sl-menu-item>
              <sl-divider></sl-divider>
              <sl-menu-item id="menu-export-all">
                <sl-icon slot="prefix" name="download"></sl-icon>
                Exporter toutes les donnÃ©es
              </sl-menu-item>
              <sl-menu-item id="menu-import">
                <sl-icon slot="prefix" name="upload"></sl-icon>
                Importer des donnÃ©es
              </sl-menu-item>
              <sl-divider></sl-divider>
              <sl-menu-item id="menu-settings">
                <sl-icon slot="prefix" name="gear"></sl-icon>
                ParamÃ¨tres
              </sl-menu-item>
              <sl-menu-item id="menu-help">
                <sl-icon slot="prefix" name="question-circle"></sl-icon>
                Aide & Documentation
              </sl-menu-item>
            </sl-menu>
          </sl-dropdown>
        </div>
      </div>
    </div>
  </header>

  <!-- ========================================
       NAVIGATION TABS
  ======================================== -->
  
  <nav class="mission-tracker-nav">
    <div class="container">
      <sl-tab-group id="main-tabs">
        <sl-tab slot="nav" panel="dashboard" active>
          <sl-icon name="grid"></sl-icon>
          Dashboard
        </sl-tab>
        <sl-tab slot="nav" panel="missions">
          <sl-icon name="briefcase"></sl-icon>
          Mes missions
          <sl-badge variant="primary" pill id="missions-count">0</sl-badge>
        </sl-tab>
        <sl-tab slot="nav" panel="timeline">
          <sl-icon name="calendar-event"></sl-icon>
          Timeline
        </sl-tab>
        <sl-tab slot="nav" panel="reports">
          <sl-icon name="file-text"></sl-icon>
          Rapports
        </sl-tab>
        <sl-tab slot="nav" panel="roadmap">
          <sl-icon name="signpost"></sl-icon>
          Roadmap perso
        </sl-tab>
        <sl-tab slot="nav" panel="analytics">
          <sl-icon name="bar-chart"></sl-icon>
          Analytics
        </sl-tab>

        <!-- ========================================
             TAB PANEL: DASHBOARD
        ======================================== -->
        
        <sl-tab-panel name="dashboard">
          <div class="dashboard-container">

            <!-- Actions rapides -->
            <section class="dashboard-section">
              <div class="section-header">
                <h2>âš¡ Actions rapides</h2>
              </div>

              <div class="quick-actions-grid">
                <button class="quick-action-card" id="quick-initial-report">
                  <sl-icon name="file-earmark-text"></sl-icon>
                  <span>Rapport d'Ã©tonnement</span>
                </button>

                <button class="quick-action-card" id="quick-weekly-checkpoint">
                  <sl-icon name="calendar-week"></sl-icon>
                  <span>Checkpoint hebdo</span>
                </button>

                <button class="quick-action-card" id="quick-add-achievement">
                  <sl-icon name="trophy"></sl-icon>
                  <span>Ajouter une rÃ©alisation</span>
                </button>

                <button class="quick-action-card" id="quick-add-challenge">
                  <sl-icon name="exclamation-triangle"></sl-icon>
                  <span>Noter un dÃ©fi</span>
                </button>

                <button class="quick-action-card" id="quick-experiment">
                  <sl-icon name="lightbulb"></sl-icon>
                  <span>Lancer une expÃ©rimentation</span>
                </button>

                <button class="quick-action-card" id="quick-final-report">
                  <sl-icon name="file-check"></sl-icon>
                  <span>Bilan final</span>
                </button>
              </div>
            </section>
            
            <!-- KPI Cards -->
            <div class="dashboard-kpis">
              <div class="kpi-card">
                <sl-icon name="briefcase" class="kpi-icon"></sl-icon>
                <div class="kpi-content">
                  <div class="kpi-value" id="kpi-total-missions">0</div>
                  <div class="kpi-label">Missions totales</div>
                </div>
              </div>

              <div class="kpi-card">
                <sl-icon name="play-circle" class="kpi-icon active"></sl-icon>
                <div class="kpi-content">
                  <div class="kpi-value" id="kpi-active-missions">0</div>
                  <div class="kpi-label">Missions actives</div>
                </div>
              </div>

              <div class="kpi-card">
                <sl-icon name="calendar-check" class="kpi-icon"></sl-icon>
                <div class="kpi-content">
                  <div class="kpi-value" id="kpi-checkpoints">0</div>
                  <div class="kpi-label">Checkpoints cette semaine</div>
                </div>
              </div>

              <div class="kpi-card">
                <sl-icon name="trophy" class="kpi-icon success"></sl-icon>
                <div class="kpi-content">
                  <div class="kpi-value" id="kpi-achievements">0</div>
                  <div class="kpi-label">RÃ©alisations</div>
                </div>
              </div>
            </div>

            <!-- Mission active en cours -->
            <section class="dashboard-section">
              <div class="section-header">
                <h2>ğŸ¯ Mission en cours</h2>
                <button class="btn btn-sm btn-ghost" id="btn-view-all-missions">
                  Voir toutes les missions
                  <sl-icon name="arrow-right"></sl-icon>
                </button>
              </div>

              <div id="current-mission-card">
                <!-- Dynamiquement chargÃ© via JS -->
              </div>
            </section>

            <!-- Prochains checkpoints -->
            <section class="dashboard-section">
              <div class="section-header">
                <h2>ğŸ“… Prochains checkpoints</h2>
                <button class="btn btn-sm btn-primary" id="btn-new-checkpoint">
                  <sl-icon name="plus"></sl-icon>
                  Nouveau checkpoint
                </button>
              </div>

              <div id="upcoming-checkpoints" class="checkpoints-list">
                <!-- Dynamiquement chargÃ© via JS -->
              </div>
            </section>

            <!-- DerniÃ¨res rÃ©alisations -->
            <section class="dashboard-section">
              <div class="section-header">
                <h2>ğŸ† DerniÃ¨res rÃ©alisations</h2>
                <button class="btn btn-sm btn-ghost" id="btn-view-all-achievements">
                  Voir toutes les rÃ©alisations
                  <sl-icon name="arrow-right"></sl-icon>
                </button>
              </div>

              <div id="recent-achievements" class="achievements-grid">
                <!-- Dynamiquement chargÃ© via JS -->
              </div>
            </section>

          </div>
        </sl-tab-panel>

        <!-- ========================================
             TAB PANEL: MES MISSIONS
        ======================================== -->
        
        <sl-tab-panel name="missions">
          <div class="missions-container">
            
            <!-- Filtres et recherche -->
            <div class="missions-toolbar">
              <div class="search-box">
                <sl-input placeholder="Rechercher une mission..." id="search-missions">
                  <sl-icon name="search" slot="prefix"></sl-icon>
                </sl-input>
              </div>

              <div class="filters">
                <sl-select placeholder="Statut" id="filter-status" clearable>
                  <sl-option value="active">Actives</sl-option>
                  <sl-option value="completed">TerminÃ©es</sl-option>
                  <sl-option value="paused">En pause</sl-option>
                </sl-select>

                <sl-select placeholder="RÃ´le" id="filter-role" clearable>
                  <sl-option value="coach-agile">Coach Agile</sl-option>
                  <sl-option value="scrum-master">Scrum Master</sl-option>
                  <sl-option value="coach-organisationnel">Coach Organisationnel</sl-option>
                  <sl-option value="product-owner">Product Owner</sl-option>
                  <sl-option value="product-manager">Product Manager</sl-option>
                  <sl-option value="designer">Designer</sl-option>
                  <sl-option value="rte">RTE</sl-option>
                  <sl-option value="dev">DÃ©veloppeur</sl-option>
                  <sl-option value="architecte">Architecte</sl-option>
                  <sl-option value="devops">DevOps</sl-option>
                </sl-select>

                <sl-select placeholder="Trier par" id="sort-missions">
                  <sl-option value="date-desc">Plus rÃ©centes</sl-option>
                  <sl-option value="date-asc">Plus anciennes</sl-option>
                  <sl-option value="title-asc">Titre (A-Z)</sl-option>
                  <sl-option value="client-asc">Client (A-Z)</sl-option>
                </sl-select>
              </div>

              <button class="btn btn-primary" id="btn-new-mission-2">
                <sl-icon name="plus-circle"></sl-icon>
                Nouvelle mission
              </button>
            </div>

            <!-- Liste des missions -->
            <div id="missions-list" class="missions-grid">
              <!-- Dynamiquement chargÃ© via JS -->
            </div>

            <!-- Empty state -->
            <div id="missions-empty-state" class="empty-state" style="display: none;">
              <sl-icon name="inbox"></sl-icon>
              <h3>Aucune mission pour le moment</h3>
              <p>CrÃ©ez votre premiÃ¨re mission pour commencer Ã  documenter vos apprentissages.</p>
              <button class="btn btn-primary" id="btn-new-mission-empty">
                <sl-icon name="plus-circle"></sl-icon>
                CrÃ©er ma premiÃ¨re mission
              </button>
            </div>

          </div>
        </sl-tab-panel>

        <!-- ========================================
             TAB PANEL: TIMELINE
        ======================================== -->
        
        <sl-tab-panel name="timeline">
          <div class="timeline-container" id="timeline-container">
            
            <!-- Filtres timeline -->
            <div class="timeline-toolbar">
              <sl-select placeholder="Mission" id="timeline-filter-mission" clearable>
                <!-- Dynamiquement chargÃ© via JS -->
              </sl-select>

              <sl-button-group>
                <button class="btn btn-sm" data-view="month" id="timeline-view-month">Mois</button>
                <button class="btn btn-sm active" data-view="quarter" id="timeline-view-quarter">Trimestre</button>
                <button class="btn btn-sm" data-view="year" id="timeline-view-year">AnnÃ©e</button>
              </sl-button-group>

              <button class="btn btn-sm btn-ghost" id="timeline-today">
                <sl-icon name="calendar-event"></sl-icon>
                Aujourd'hui
              </button>
            </div>

            <!-- Timeline visuelle -->
            <div id="timeline-content" class="timeline-visual">
              <!-- Dynamiquement chargÃ© via timeline-manager.js -->
            </div>

          </div>
        </sl-tab-panel>

        <!-- ========================================
             TAB PANEL: RAPPORTS
        ======================================== -->
        
        <sl-tab-panel name="reports">
          <div class="reports-container">
            
            <!-- SÃ©lection du type de rapport -->
            <div class="reports-toolbar">
              <div class="report-types">
                <button class="report-type-card active" data-report-type="initial">
                  <sl-icon name="file-earmark-text"></sl-icon>
                  <span>Rapport d'Ã©tonnement</span>
                  <sl-badge variant="primary" id="initial-reports-count">0</sl-badge>
                </button>

                <button class="report-type-card" data-report-type="checkpoint">
                  <sl-icon name="calendar-check"></sl-icon>
                  <span>Checkpoints</span>
                  <sl-badge variant="primary" id="checkpoints-count">0</sl-badge>
                </button>

                <button class="report-type-card" data-report-type="final">
                  <sl-icon name="file-check"></sl-icon>
                  <span>Bilans finaux</span>
                  <sl-badge variant="primary" id="final-reports-count">0</sl-badge>
                </button>
              </div>

              <button class="btn btn-primary" id="btn-new-report">
                <sl-icon name="plus-circle"></sl-icon>
                Nouveau rapport
              </button>
            </div>

            <!-- Liste des rapports -->
            <div id="reports-list" class="reports-list">
              <!-- Dynamiquement chargÃ© via JS -->
            </div>

          </div>
        </sl-tab-panel>

        <!-- ========================================
             TAB PANEL: ROADMAP PERSONNELLE
        ======================================== -->
        
        <sl-tab-panel name="roadmap">
          <div class="roadmap-container">
            
            <!-- Vision -->
            <section class="roadmap-section">
              <div class="section-header">
                <h2>ğŸ¯ Ma vision</h2>
                <button class="btn btn-sm btn-ghost" id="btn-edit-vision">
                  <sl-icon name="pencil"></sl-icon>
                  Ã‰diter
                </button>
              </div>

              <div id="roadmap-vision" class="roadmap-vision-card">
                <!-- Dynamiquement chargÃ© via JS -->
              </div>
            </section>

            <!-- CompÃ©tences actuelles -->
            <section class="roadmap-section">
              <div class="section-header">
                <h2>ğŸ’ª Mes compÃ©tences actuelles</h2>
                <button class="btn btn-sm btn-primary" id="btn-add-skill">
                  <sl-icon name="plus"></sl-icon>
                  Ajouter une compÃ©tence
                </button>
              </div>

              <div id="current-skills" class="skills-grid">
                <!-- Dynamiquement chargÃ© via JS -->
              </div>
            </section>

            <!-- CompÃ©tences Ã  dÃ©velopper -->
            <section class="roadmap-section">
              <div class="section-header">
                <h2>ğŸš€ CompÃ©tences Ã  dÃ©velopper</h2>
                <button class="btn btn-sm btn-primary" id="btn-add-skill-to-develop">
                  <sl-icon name="plus"></sl-icon>
                  Ajouter
                </button>
              </div>

              <div id="skills-to-develop" class="skills-to-develop-list">
                <!-- Dynamiquement chargÃ© via JS -->
              </div>
            </section>

            <!-- Objectifs d'apprentissage -->
            <section class="roadmap-section">
              <div class="section-header">
                <h2>ğŸ“š Objectifs d'apprentissage</h2>
                <button class="btn btn-sm btn-primary" id="btn-add-learning-goal">
                  <sl-icon name="plus"></sl-icon>
                  Ajouter un objectif
                </button>
              </div>

              <div id="learning-goals" class="learning-goals-list">
                <!-- Dynamiquement chargÃ© via JS -->
              </div>
            </section>

            <!-- ExpÃ©rimentations planifiÃ©es -->
            <section class="roadmap-section">
              <div class="section-header">
                <h2>ğŸ§ª ExpÃ©rimentations planifiÃ©es</h2>
                <button class="btn btn-sm btn-primary" id="btn-add-planned-experiment">
                  <sl-icon name="plus"></sl-icon>
                  Ajouter
                </button>
              </div>

              <div id="experiments-planned" class="experiments-planned-list">
                <!-- Dynamiquement chargÃ© via JS -->
              </div>
            </section>

          </div>
        </sl-tab-panel>

        <!-- ========================================
             TAB PANEL: ANALYTICS
        ======================================== -->
        
        <sl-tab-panel name="analytics">
          <div class="analytics-container">
            
            <!-- PÃ©riode d'analyse -->
            <div class="analytics-toolbar">
              <sl-select placeholder="Mission" id="analytics-filter-mission" clearable>
                <sl-option value="all">Toutes les missions</sl-option>
                <!-- Dynamiquement chargÃ© via JS -->
              </sl-select>

              <sl-select placeholder="PÃ©riode" id="analytics-period">
                <sl-option value="1m">1 mois</sl-option>
                <sl-option value="3m">3 mois</sl-option>
                <sl-option value="6m">6 mois</sl-option>
                <sl-option value="1y" selected>1 an</sl-option>
                <sl-option value="all">Tout</sl-option>
              </sl-select>

              <button class="btn btn-sm btn-ghost" id="btn-export-analytics">
                <sl-icon name="download"></sl-icon>
                Exporter
              </button>
            </div>

            <!-- Graphiques et stats -->
            <div class="analytics-grid">
              
              <!-- RÃ©partition par rÃ´le -->
              <div class="analytics-card">
                <h3>ğŸ“Š RÃ©partition par rÃ´le</h3>
                <canvas id="chart-roles"></canvas>
              </div>

              <!-- Ã‰volution des compÃ©tences -->
              <div class="analytics-card">
                <h3>ğŸ“ˆ Ã‰volution des compÃ©tences</h3>
                <canvas id="chart-skills"></canvas>
              </div>

              <!-- Mood tracker -->
              <div class="analytics-card">
                <h3>ğŸ˜Š Mood tracker</h3>
                <canvas id="chart-mood"></canvas>
              </div>

              <!-- RÃ©alisations par catÃ©gorie -->
              <div class="analytics-card">
                <h3>ğŸ† RÃ©alisations par catÃ©gorie</h3>
                <canvas id="chart-achievements"></canvas>
              </div>

              <!-- DÃ©fis rÃ©solus vs en cours -->
              <div class="analytics-card">
                <h3>ğŸ›¡ï¸ DÃ©fis rÃ©solus vs en cours</h3>
                <canvas id="chart-challenges"></canvas>
              </div>

              <!-- ExpÃ©rimentations -->
              <div class="analytics-card">
                <h3>ğŸ§ª ExpÃ©rimentations</h3>
                <div id="experiments-stats">
                  <!-- Stats textuelles -->
                </div>
              </div>

            </div>

          </div>
        </sl-tab-panel>

      </sl-tab-group>
    </div>
  </nav>

  <!-- ========================================
       MODALS
  ======================================== -->

  <!-- Modal: Nouvelle mission -->
  <sl-dialog id="modal-new-mission" label="ğŸ¯ Nouvelle mission" class="mission-tracker-modal" no-header>
    <div slot="label">ğŸ¯ Nouvelle mission</div>
    <form id="form-new-mission">
      <div style="display: flex; flex-direction: column; gap: 1rem;">
        <sl-input name="title" label="Titre de la mission" placeholder="Ex: Transformation Agile Ã‰quipe X" required></sl-input>
        
        <sl-input name="client" label="Client / Entreprise" placeholder="Ex: Entreprise ABC" required></sl-input>
        
        <sl-select name="role" label="Votre rÃ´le" placeholder="SÃ©lectionnez votre rÃ´le" id="mission-role" required>
          <!-- Options chargÃ©es dynamiquement -->
        </sl-select>
        
        <sl-input name="start_date" label="Date de dÃ©but" type="date" required></sl-input>
      </div>

      <div slot="footer">
        <sl-button variant="default" id="btn-cancel-mission">Annuler</sl-button>
        <sl-button variant="primary" type="submit">CrÃ©er la mission</sl-button>
      </div>
    </form>
  </sl-dialog>

  <!-- Modal: Ã‰dition mission -->
  <sl-dialog id="modal-edit-mission" label="âœï¸ Ã‰diter la mission" class="mission-tracker-modal" no-header>
    <div slot="label">âœï¸ Ã‰diter la mission</div>
    <form id="form-edit-mission">
      <!-- Formulaire dynamique -->
      
      <div slot="footer">
        <sl-button variant="default" id="btn-cancel-edit-mission">Annuler</sl-button>
        <sl-button variant="primary" type="submit">Enregistrer</sl-button>
      </div>
    </form>
  </sl-dialog>

  <!-- Modal: Rapport d'Ã©tonnement -->
  <sl-dialog id="modal-initial-report" label="ğŸ“ Rapport d'Ã©tonnement (J+15)" class="mission-tracker-modal modal-lg" no-header>
    <div slot="label">ğŸ“ Rapport d'Ã©tonnement (J+15)</div>
    <div id="initial-report-content">
      <!-- Contenu chargÃ© dynamiquement -->
    </div>
  </sl-dialog>

  <!-- Modal: Checkpoint -->
  <sl-dialog id="modal-checkpoint" label="ğŸ“… Checkpoint" class="mission-tracker-modal modal-lg" no-header>
    <div slot="label">ğŸ“… Checkpoint</div>
    <div id="checkpoint-content">
      <!-- Contenu chargÃ© dynamiquement -->
    </div>
  </sl-dialog>

  <!-- Modal: Bilan final -->
  <sl-dialog id="modal-final-report" label="ğŸ Bilan final de mission" class="mission-tracker-modal modal-lg" no-header>
    <div slot="label">ğŸ Bilan final de mission</div>
    <div id="final-report-content">
      <!-- Contenu chargÃ© dynamiquement -->
    </div>
  </sl-dialog>

  <!-- Modal: Import -->
  <sl-dialog id="modal-import" label="ğŸ“¤ Importer des donnÃ©es" class="mission-tracker-modal" no-header>
    <div slot="label">ğŸ“¤ Importer des donnÃ©es</div>
    <div style="display: flex; flex-direction: column; gap: 1rem;">
      <div class="alert info">
        <sl-icon name="info-circle"></sl-icon>
        <div>
          <strong>Import de donnÃ©es</strong>
          <p>Importez un fichier JSON exportÃ© prÃ©cÃ©demment. Les donnÃ©es seront fusionnÃ©es avec vos donnÃ©es existantes.</p>
        </div>
      </div>
      
      <sl-input type="file" id="import-file-input" accept=".json">
        <sl-icon slot="prefix" name="file-earmark-arrow-up"></sl-icon>
      </sl-input>
      
      <div id="import-preview" style="display: none;">
        <h4>AperÃ§u des donnÃ©es</h4>
        <div id="import-preview-content"></div>
      </div>
    </div>

    <div slot="footer">
      <sl-button variant="default" id="btn-cancel-import">Annuler</sl-button>
      <sl-button variant="primary" id="btn-confirm-import" disabled>
        <sl-icon name="upload"></sl-icon>
        Importer
      </sl-button>
    </div>
  </sl-dialog>

  <!-- Modal: Settings -->
  <sl-dialog id="modal-settings" label="âš™ï¸ ParamÃ¨tres" class="mission-tracker-modal modal-lg" no-header>
    <div slot="label">âš™ï¸ ParamÃ¨tres</div>
    <div style="display: flex; flex-direction: column; gap: 1rem;">
      
      <section>
        <h3>ğŸ¨ PrÃ©fÃ©rences d'affichage</h3>
        <div class="settings-group">
          <sl-switch id="setting-dark-mode" checked>
            <span style="font-weight: 500;">Mode sombre</span>
            <span style="font-size: 0.85rem; color: var(--text-muted); display: block;">Interface sombre pour rÃ©duire la fatigue oculaire</span>
          </sl-switch>
          <sl-switch id="setting-animations" checked>
            <span style="font-weight: 500;">Animations</span>
            <span style="font-size: 0.85rem; color: var(--text-muted); display: block;">Transitions et effets visuels</span>
          </sl-switch>
        </div>
      </section>
      
      <section>
        <h3>ğŸ”” Notifications</h3>
        <div class="settings-group">
          <sl-switch id="setting-notifications" checked>
            <span style="font-weight: 500;">Activer les notifications</span>
            <span style="font-size: 0.85rem; color: var(--text-muted); display: block;">Recevoir des alertes pour les actions importantes</span>
          </sl-switch>
          <sl-switch id="setting-sound">
            <span style="font-weight: 500;">Sons</span>
            <span style="font-size: 0.85rem; color: var(--text-muted); display: block;">Sons lors des notifications</span>
          </sl-switch>
        </div>
      </section>
      
      <section>
        <h3>ğŸ’¾ Gestion des donnÃ©es</h3>
        <div style="display: flex; flex-direction: column; gap: 0.75rem;">
          <sl-button variant="default" id="btn-clear-cache" size="medium">
            <sl-icon slot="prefix" name="trash"></sl-icon>
            Vider le cache
          </sl-button>
          <sl-button variant="danger" id="btn-reset-data" size="medium">
            <sl-icon slot="prefix" name="exclamation-triangle"></sl-icon>
            RÃ©initialiser toutes les donnÃ©es
          </sl-button>
          <p style="font-size: 0.85rem; color: var(--text-muted); margin: 0.5rem 0 0 0;">
            âš ï¸ La rÃ©initialisation supprimera dÃ©finitivement toutes vos missions et rapports.
          </p>
        </div>
      </section>
      
      <section>
        <h3>â„¹ï¸ Ã€ propos</h3>
        <div style="display: grid; grid-template-columns: auto 1fr; gap: 0.5rem 1rem; font-size: 0.9rem;">
          <strong>Version :</strong> <span>1.4.0</span>
          <strong>Auteur :</strong> <span>SÃ©bastien ROUEN</span>
          <strong>License :</strong> <span>MIT</span>
          <strong>GitHub :</strong> <span><a href="https://github.com/sebastien-rouen/agile-coach-toolkit" target="_blank">agile-coach-toolkit</a></span>
        </div>
      </section>
    </div>

    <div slot="footer">
      <sl-button variant="default" id="btn-close-settings">Fermer</sl-button>
      <sl-button variant="primary" id="btn-save-settings">
        <sl-icon name="check"></sl-icon>
        Enregistrer
      </sl-button>
    </div>
  </sl-dialog>

  <!-- Modal: Help -->
  <sl-dialog id="modal-help" label="â“ Aide & Documentation" class="mission-tracker-modal modal-lg" no-header>
    <div slot="label">â“ Aide & Documentation</div>
    <div style="display: flex; flex-direction: column; gap: 1rem;">
      
      <section>
        <h3>ğŸš€ DÃ©marrage rapide</h3>
        <ol>
          <li>CrÃ©ez votre premiÃ¨re mission</li>
          <li>Documentez avec un rapport d'Ã©tonnement (J+15)</li>
          <li>Ajoutez des checkpoints rÃ©guliers</li>
          <li>Finalisez avec un bilan complet</li>
        </ol>
      </section>
      
      <section>
        <h3>ğŸ’¡ Conseils pratiques</h3>
        <div class="help-tip">
          <strong>ğŸ“ Rapport d'Ã©tonnement :</strong> Notez vos premiÃ¨res impressions aprÃ¨s 15 jours. C'est le moment oÃ¹ vous avez le plus de recul sans avoir perdu votre regard neuf.
        </div>
        <div class="help-tip">
          <strong>ğŸ“… Checkpoints :</strong> Faites un point hebdomadaire ou mensuel. La rÃ©gularitÃ© est clÃ© pour suivre votre progression.
        </div>
        <div class="help-tip">
          <strong>ğŸ¯ Roadmap :</strong> DÃ©finissez votre vision et vos objectifs d'apprentissage. Cela vous aidera Ã  rester focalisÃ© sur votre dÃ©veloppement.
        </div>
      </section>
      
      <section>
        <h3>âŒ¨ï¸ Raccourcis</h3>
        <p><kbd>Escape</kbd> Fermer une modal â€¢ <kbd>Tab</kbd> Navigation â€¢ <kbd>Enter</kbd> Valider</p>
      </section>
      
      <section>
        <h3>ğŸ’¾ Vos donnÃ©es</h3>
        <p>StockÃ©es localement dans votre navigateur. <strong>Pensez Ã  exporter rÃ©guliÃ¨rement</strong> (Menu â†’ Exporter) pour sauvegarder vos missions.</p>
      </section>
      
      <section>
        <h3>ğŸ“ Besoin d'aide ?</h3>
        <p>
          <a href="https://github.com/sebastien-rouen/agile-coach-toolkit" target="_blank">ğŸ“š Documentation</a> â€¢ 
          <a href="https://github.com/sebastien-rouen/agile-coach-toolkit/issues" target="_blank">ğŸ› Signaler un bug</a> â€¢ 
          <a href="mailto:rouen.sebastien@gmail.com">âœ‰ï¸ Contact</a>
        </p>
      </section>
    </div>

    <div slot="footer">
      <sl-button variant="primary" id="btn-close-help">Fermer</sl-button>
    </div>
  </sl-dialog>

  <!-- Modal: Export -->
  <sl-dialog id="modal-export" label="ğŸ“¥ Exporter les donnÃ©es" class="mission-tracker-modal" no-header>
    <div slot="label">ğŸ“¥ Exporter les donnÃ©es</div>
    <div class="export-options" style="display: flex; flex-direction: column; gap: 1rem;">
      <sl-radio-group name="export-format" value="pdf">
        <sl-radio value="pdf">PDF (avec mise en forme)</sl-radio>
        <sl-radio value="markdown">Markdown (brut)</sl-radio>
        <sl-radio value="json">JSON (donnÃ©es structurÃ©es)</sl-radio>
      </sl-radio-group>

      <sl-select placeholder="Que voulez-vous exporter ?" id="export-scope" multiple>
        <sl-option value="missions">Missions</sl-option>
        <sl-option value="reports">Rapports</sl-option>
        <sl-option value="checkpoints">Checkpoints</sl-option>
        <sl-option value="achievements">RÃ©alisations</sl-option>
        <sl-option value="challenges">DÃ©fis</sl-option>
        <sl-option value="experiments">ExpÃ©rimentations</sl-option>
        <sl-option value="roadmap">Roadmap personnelle</sl-option>
      </sl-select>
    </div>

    <div slot="footer">
      <sl-button variant="default" id="btn-cancel-export">Annuler</sl-button>
      <sl-button variant="primary" id="btn-confirm-export">
        <sl-icon name="download"></sl-icon>
        Exporter
      </sl-button>
    </div>
  </sl-dialog>

  <!-- Modal: Ajouter RÃ©alisation -->
  <sl-dialog id="modal-add-achievement" label="ğŸ† Ajouter une rÃ©alisation" class="mission-tracker-modal" no-header>
    <div slot="label">ğŸ† Ajouter une rÃ©alisation</div>
    <form id="form-add-achievement">
      <div style="display: flex; flex-direction: column; gap: 1rem;">
        <sl-input name="achievement_title" label="Titre de la rÃ©alisation" placeholder="Ex: Mise en place des daily meetings" required
          help-text="DÃ©crivez briÃ¨vement votre rÃ©alisation"></sl-input>
        
        <sl-select name="achievement_category" label="CatÃ©gorie" required
          help-text="Type de rÃ©alisation">
          <sl-option value="team">ğŸ‘¥ Ã‰quipe</sl-option>
          <sl-option value="process">âš™ï¸ Processus</sl-option>
          <sl-option value="delivery">ğŸš€ Livraison</sl-option>
          <sl-option value="coaching">ğŸ¯ Coaching</sl-option>
          <sl-option value="innovation">ğŸ’¡ Innovation</sl-option>
        </sl-select>
        
        <sl-textarea name="achievement_description" label="Description" rows="4" required
          help-text="DÃ©crivez ce que vous avez accompli et l'impact"></sl-textarea>
        
        <sl-input name="achievement_date" label="Date" type="date" required></sl-input>
        
        <sl-textarea name="achievement_impact" label="Impact" rows="3"
          help-text="Quel a Ã©tÃ© l'impact de cette rÃ©alisation ?"></sl-textarea>
      </div>

      <div slot="footer">
        <sl-button variant="default" id="btn-cancel-achievement">Annuler</sl-button>
        <sl-button variant="primary" type="submit">Ajouter</sl-button>
      </div>
    </form>
  </sl-dialog>

  <!-- Modal: Noter un DÃ©fi -->
  <sl-dialog id="modal-add-challenge" label="âš ï¸ Noter un dÃ©fi" class="mission-tracker-modal" no-header>
    <div slot="label">âš ï¸ Noter un dÃ©fi</div>
    <form id="form-add-challenge">
      <div style="display: flex; flex-direction: column; gap: 1rem;">
        <sl-input name="challenge_title" label="Titre du dÃ©fi" placeholder="Ex: RÃ©sistance au changement" required
          help-text="Nommez le dÃ©fi rencontrÃ©"></sl-input>
        
        <sl-select name="challenge_severity" label="SÃ©vÃ©ritÃ©" required
          help-text="Niveau d'impact du dÃ©fi">
          <sl-option value="low">ğŸŸ¢ Faible</sl-option>
          <sl-option value="medium">ğŸŸ¡ Moyenne</sl-option>
          <sl-option value="high">ğŸ”´ Ã‰levÃ©e</sl-option>
        </sl-select>
        
        <sl-textarea name="challenge_description" label="Description du dÃ©fi" rows="4" required
          help-text="DÃ©crivez le dÃ©fi et son contexte"></sl-textarea>
        
        <sl-textarea name="challenge_actions" label="Actions envisagÃ©es" rows="3"
          help-text="Quelles actions comptez-vous mettre en place ?"></sl-textarea>
        
        <sl-input name="challenge_date" label="Date" type="date" required></sl-input>
        
        <sl-select name="challenge_status" label="Statut" value="open" required>
          <sl-option value="open">ğŸ”“ Ouvert</sl-option>
          <sl-option value="in-progress">ğŸ”„ En cours</sl-option>
          <sl-option value="resolved">âœ… RÃ©solu</sl-option>
        </sl-select>
      </div>

      <div slot="footer">
        <sl-button variant="default" id="btn-cancel-challenge">Annuler</sl-button>
        <sl-button variant="primary" type="submit">Ajouter</sl-button>
      </div>
    </form>
  </sl-dialog>

  <!-- Modal: Lancer ExpÃ©rimentation (Quick) -->
  <sl-dialog id="modal-quick-experiment" label="ğŸ§ª Lancer une expÃ©rimentation" class="mission-tracker-modal" no-header>
    <div slot="label">ğŸ§ª Lancer une expÃ©rimentation</div>
    <form id="form-quick-experiment">
      <div style="display: flex; flex-direction: column; gap: 1rem;">
        <sl-input name="experiment_title" label="Titre de l'expÃ©rimentation" placeholder="Ex: Tester les OKR avec l'Ã©quipe" required
          help-text="Nommez votre expÃ©rimentation"></sl-input>
        
        <sl-textarea name="experiment_hypothesis" label="HypothÃ¨se" rows="3" required
          help-text="Qu'est-ce que vous voulez tester ?"></sl-textarea>
        
        <sl-textarea name="experiment_method" label="MÃ©thode" rows="4" required
          help-text="Comment allez-vous procÃ©der ?"></sl-textarea>
        
        <sl-textarea name="experiment_success" label="CritÃ¨res de succÃ¨s" rows="3" required
          help-text="Comment saurez-vous que Ã§a fonctionne ?"></sl-textarea>
        
        <sl-input name="experiment_start" label="Date de dÃ©but" type="date" required></sl-input>
        
        <sl-input name="experiment_duration" label="DurÃ©e (en jours)" type="number" value="30" required
          help-text="DurÃ©e prÃ©vue de l'expÃ©rimentation"></sl-input>
      </div>

      <div slot="footer">
        <sl-button variant="default" id="btn-cancel-quick-experiment">Annuler</sl-button>
        <sl-button variant="primary" type="submit">Lancer</sl-button>
      </div>
    </form>
  </sl-dialog>

  <!-- Modal: Ã‰diter Vision -->
  <sl-dialog id="modal-edit-vision" label="ğŸ¯ Ma vision" class="mission-tracker-modal modal-lg" no-header>
    <div slot="label">ğŸ¯ Ã‰diter ma vision</div>
    <form id="form-edit-vision">
      <div style="display: flex; flex-direction: column; gap: 1rem;">
        <sl-textarea name="vision" label="Ma vision professionnelle" rows="6" required
          help-text="DÃ©crivez votre vision Ã  moyen/long terme"></sl-textarea>
        <sl-textarea name="values" label="Mes valeurs" rows="4"
          help-text="Quelles sont vos valeurs professionnelles ?"></sl-textarea>
        <sl-textarea name="goals" label="Mes objectifs principaux" rows="4"
          help-text="Quels sont vos grands objectifs ?"></sl-textarea>
      </div>

      <div slot="footer">
        <sl-button variant="default" id="btn-cancel-vision">Annuler</sl-button>
        <sl-button variant="primary" type="submit">Enregistrer</sl-button>
      </div>
    </form>
  </sl-dialog>

  <!-- Modal: Ajouter CompÃ©tence -->
  <sl-dialog id="modal-add-skill" label="ğŸ’ª Ajouter une compÃ©tence" class="mission-tracker-modal" no-header>
    <div slot="label">ğŸ’ª Ajouter une compÃ©tence</div>
    <form id="form-add-skill">
      <div style="display: flex; flex-direction: column; gap: 1rem;">
        <sl-input name="skill_name" label="Nom de la compÃ©tence" placeholder="Ex: Facilitation d'ateliers" required></sl-input>
        <sl-select name="skill_level" label="Niveau de maÃ®trise" required>
          <sl-option value="beginner">ğŸŒ± DÃ©butant</sl-option>
          <sl-option value="intermediate">ğŸŒ¿ IntermÃ©diaire</sl-option>
          <sl-option value="advanced">ğŸŒ³ AvancÃ©</sl-option>
          <sl-option value="expert">ğŸ† Expert</sl-option>
        </sl-select>
        <sl-select name="skill_category" label="CatÃ©gorie" required>
          <sl-option value="facilitation">Facilitation</sl-option>
          <sl-option value="coaching">Coaching</sl-option>
          <sl-option value="technique">Technique</sl-option>
          <sl-option value="leadership">Leadership</sl-option>
          <sl-option value="communication">Communication</sl-option>
          <sl-option value="autre">Autre</sl-option>
        </sl-select>
        <sl-textarea name="skill_description" label="Description" rows="3"
          help-text="DÃ©crivez votre expÃ©rience avec cette compÃ©tence"></sl-textarea>
      </div>

      <div slot="footer">
        <sl-button variant="default" id="btn-cancel-skill">Annuler</sl-button>
        <sl-button variant="primary" type="submit">Ajouter</sl-button>
      </div>
    </form>
  </sl-dialog>

  <!-- Modal: Ajouter CompÃ©tence Ã  DÃ©velopper -->
  <sl-dialog id="modal-add-skill-to-develop" label="ğŸš€ CompÃ©tence Ã  dÃ©velopper" class="mission-tracker-modal" no-header>
    <div slot="label">ğŸš€ Ajouter une compÃ©tence Ã  dÃ©velopper</div>
    <form id="form-add-skill-to-develop">
      <div style="display: flex; flex-direction: column; gap: 1rem;">
        <sl-input name="skill_name" label="Nom de la compÃ©tence" placeholder="Ex: Coaching d'Ã©quipe" required></sl-input>
        <sl-select name="priority" label="PrioritÃ©" required>
          <sl-option value="high">ğŸ”´ Haute</sl-option>
          <sl-option value="medium">ğŸŸ¡ Moyenne</sl-option>
          <sl-option value="low">ğŸŸ¢ Basse</sl-option>
        </sl-select>
        <sl-textarea name="why" label="Pourquoi cette compÃ©tence ?" rows="3" required
          help-text="Quelle est votre motivation ?"></sl-textarea>
        <sl-textarea name="how" label="Comment la dÃ©velopper ?" rows="3"
          help-text="Quelles actions envisagez-vous ?"></sl-textarea>
        <sl-input name="target_date" label="Date cible" type="date"></sl-input>
      </div>

      <div slot="footer">
        <sl-button variant="default" id="btn-cancel-skill-to-develop">Annuler</sl-button>
        <sl-button variant="primary" type="submit">Ajouter</sl-button>
      </div>
    </form>
  </sl-dialog>

  <!-- Modal: Ajouter Objectif d'Apprentissage -->
  <sl-dialog id="modal-add-learning-goal" label="ğŸ“š Objectif d'apprentissage" class="mission-tracker-modal" no-header>
    <div slot="label">ğŸ“š Ajouter un objectif d'apprentissage</div>
    <form id="form-add-learning-goal">
      <div style="display: flex; flex-direction: column; gap: 1rem;">
        <sl-input name="goal_title" label="Titre de l'objectif" placeholder="Ex: MaÃ®triser le framework SAFe" required></sl-input>
        <sl-select name="goal_type" label="Type d'apprentissage" required>
          <sl-option value="certification">ğŸ“ Certification</sl-option>
          <sl-option value="formation">ğŸ“– Formation</sl-option>
          <sl-option value="pratique">ğŸ› ï¸ Pratique</sl-option>
          <sl-option value="lecture">ğŸ“š Lecture</sl-option>
          <sl-option value="mentorat">ğŸ‘¥ Mentorat</sl-option>
        </sl-select>
        <sl-textarea name="goal_description" label="Description" rows="4" required
          help-text="DÃ©crivez ce que vous voulez apprendre"></sl-textarea>
        <sl-input name="goal_deadline" label="Date limite" type="date"></sl-input>
        <sl-textarea name="goal_resources" label="Ressources nÃ©cessaires" rows="3"
          help-text="Livres, formations, budget, temps..."></sl-textarea>
      </div>

      <div slot="footer">
        <sl-button variant="default" id="btn-cancel-learning-goal">Annuler</sl-button>
        <sl-button variant="primary" type="submit">Ajouter</sl-button>
      </div>
    </form>
  </sl-dialog>

  <!-- Modal: Ajouter ExpÃ©rimentation -->
  <sl-dialog id="modal-add-experiment" label="ğŸ§ª ExpÃ©rimentation" class="mission-tracker-modal" no-header>
    <div slot="label">ğŸ§ª Ajouter une expÃ©rimentation</div>
    <form id="form-add-experiment">
      <div style="display: flex; flex-direction: column; gap: 1rem;">
        <sl-input name="experiment_title" label="Titre de l'expÃ©rimentation" placeholder="Ex: Tester les OKR avec l'Ã©quipe" required></sl-input>
        <sl-textarea name="experiment_hypothesis" label="HypothÃ¨se" rows="3" required
          help-text="Qu'est-ce que vous voulez tester ?"></sl-textarea>
        <sl-textarea name="experiment_method" label="MÃ©thode" rows="4" required
          help-text="Comment allez-vous procÃ©der ?"></sl-textarea>
        <sl-textarea name="experiment_success" label="CritÃ¨res de succÃ¨s" rows="3" required
          help-text="Comment saurez-vous que Ã§a fonctionne ?"></sl-textarea>
        <sl-input name="experiment_start" label="Date de dÃ©but" type="date" required></sl-input>
        <sl-input name="experiment_duration" label="DurÃ©e (en jours)" type="number" value="30" required></sl-input>
      </div>

      <div slot="footer">
        <sl-button variant="default" id="btn-cancel-experiment">Annuler</sl-button>
        <sl-button variant="primary" type="submit">Ajouter</sl-button>
      </div>
    </form>
  </sl-dialog>

  <!-- Modal: Charger une dÃ©mo -->
  <sl-dialog id="modal-load-demo" label="ğŸ¬ Charger une dÃ©mo" class="mission-tracker-modal modal-lg" no-header>
    <div slot="label">ğŸ¬ Charger une dÃ©mo</div>
    
    <div class="demo-intro">
      <p>DÃ©couvrez Mission Tracker avec des exemples concrets de missions. Choisissez un template pour voir comment l'outil fonctionne avec des donnÃ©es rÃ©alistes.</p>
      <sl-alert variant="warning" open>
        <sl-icon slot="icon" name="exclamation-triangle"></sl-icon>
        <strong>Attention :</strong> Charger une dÃ©mo remplacera vos donnÃ©es actuelles. Pensez Ã  exporter vos donnÃ©es avant si nÃ©cessaire.
      </sl-alert>
    </div>

    <div class="demo-templates">
      <div class="demo-card" data-template="demo-scrum-master">
        <div class="demo-card-icon">ğŸƒ</div>
        <div class="demo-card-content">
          <h3>Scrum Master</h3>
          <p>Mission de transformation agile dans une banque digitale</p>
          <ul class="demo-card-features">
            <li>âœ… 4 objectifs dÃ©finis</li>
            <li>ğŸ“… 5 Ã©vÃ©nements clÃ©s</li>
            <li>ğŸ† 2 rÃ©alisations majeures</li>
            <li>âš ï¸ 1 dÃ©fi rÃ©solu</li>
          </ul>
        </div>
        <sl-button variant="primary" class="btn-load-template">
          <sl-icon name="play-circle"></sl-icon>
          Charger
        </sl-button>
      </div>

      <div class="demo-card" data-template="demo-coach-agile">
        <div class="demo-card-icon">ğŸ¯</div>
        <div class="demo-card-content">
          <h3>Coach Agile</h3>
          <p>Transformation Ã  l'Ã©chelle avec framework SAFe dans une assurance</p>
          <ul class="demo-card-features">
            <li>âœ… 5 objectifs (3 complÃ©tÃ©s)</li>
            <li>ğŸ“… 6 Ã©vÃ©nements majeurs</li>
            <li>ğŸ† 2 certifications obtenues</li>
            <li>âš ï¸ 2 dÃ©fis organisationnels</li>
            <li>ğŸ§ª 1 expÃ©rimentation rÃ©ussie</li>
          </ul>
        </div>
        <sl-button variant="primary" class="btn-load-template">
          <sl-icon name="play-circle"></sl-icon>
          Charger
        </sl-button>
      </div>

      <div class="demo-card" data-template="demo-product-owner">
        <div class="demo-card-icon">ğŸ“±</div>
        <div class="demo-card-content">
          <h3>Product Owner</h3>
          <p>Refonte d'application mobile e-commerce avec focus metrics</p>
          <ul class="demo-card-features">
            <li>âœ… 4 objectifs business</li>
            <li>ğŸ“… 5 Ã©vÃ©nements produit</li>
            <li>ğŸ“ˆ AmÃ©lioration NPS +17 points</li>
            <li>ğŸš€ Conversion +18%</li>
          </ul>
        </div>
        <sl-button variant="primary" class="btn-load-template">
          <sl-icon name="play-circle"></sl-icon>
          Charger
        </sl-button>
      </div>
    </div>

    <div slot="footer">
      <sl-button variant="default" id="btn-cancel-demo">Annuler</sl-button>
    </div>
  </sl-dialog>

  <!-- Modal: DÃ©tail Rapport/Checkpoint -->
  <sl-dialog id="modal-report-detail" label="ğŸ“„ DÃ©tail du rapport" class="mission-tracker-modal modal-xl" no-header>
    <div slot="label" id="report-detail-title">ğŸ“„ DÃ©tail du rapport</div>
    
    <div id="report-detail-content" class="report-detail-content">
      <!-- Contenu chargÃ© dynamiquement -->
    </div>

    <div slot="footer">
      <sl-button variant="default" id="btn-close-report-detail">Fermer</sl-button>
      <sl-button variant="primary" id="btn-edit-report-detail">
        <sl-icon name="pencil"></sl-icon>
        Modifier
      </sl-button>
    </div>
  </sl-dialog>

  <!-- Toast notifications (Shoelace) -->
  <div id="toast-container"></div>

  <!-- ========================================
       SCRIPTS
  ======================================== -->

  <!-- PocketBase Integration -->
  <script src="../../assets/js/pocketbase-manager.js"></script>

  <!-- IntÃ©gration Agile Coach Toolkit -->
  <script src="../../assets/js/tool-integration.js"></script>
  <script>
      window.TOOL_CONFIG = {
          name: 'mission-tracker',
          backUrl: '../../index.html#tools'
      };
  </script>

  <!-- Templates config (modules ES6) -->
  <script type="module" src="assets/js/templates/roles-config.js"></script>
  <script type="module" src="assets/js/templates/questions-bank.js"></script>

  <!-- Core modules -->
  <script type="module" src="assets/js/data-manager.js"></script>
  <script type="module" src="assets/js/mission-tracker.js"></script>
  <script type="module" src="assets/js/timeline-manager.js"></script>
  <script type="module" src="assets/js/report-generator.js"></script>
  <script type="module" src="assets/js/export-manager.js"></script>

  <!-- Init -->
  <script type="module">
    // L'initialisation se fait automatiquement dans mission-tracker.js
    console.log('ğŸ¯ Mission Tracker - Scripts chargÃ©s');
  </script>

</body>
</html>
