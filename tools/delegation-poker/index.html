<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Delegation Poker - Management 3.0</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/themes/light.css">
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <h1>üÉè Delegation Poker</h1>
            <p class="subtitle">Clarifiez les niveaux de d√©l√©gation dans votre √©quipe</p>

            <div class="header-actions">
                <button class="btn btn-secondary" id="btnNewSession">
                    ‚ûï Nouvelle session
                </button>
                <button class="btn btn-secondary" id="btnLoadSession">
                    üìÇ Charger session
                </button>
                <select class="btn btn-secondary" id="selectTemplate" style="cursor: pointer;">
                    <option value="">üìã Charger un template...</option>
                    <option value="product">üéØ √âquipe Produit - Sprint Planning</option>
                    <option value="rh">üë• Service RH - Recrutement</option>
                    <option value="medical">üè• Service Urgences - Protocoles</option>
                    <option value="military">üéñÔ∏è Unit√© Tactique - Mission</option>
                    <option value="digital-license">ü™™ Permis Num√©rique - MVP</option>
                </select>
                <button class="btn btn-primary" id="btnExport" disabled>
                    üì• Exporter
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <div class="layout">
            <!-- Sidebar : L√©gende -->
            <aside class="sidebar">
                <div class="card">
                    <div class="card-header">
                        <h2>üìä Niveaux de d√©l√©gation</h2>
                    </div>
                    <div class="card-body">
                        <div class="delegation-levels">
                            <div class="level-item" data-level="1">
                                <span class="level-badge level-1">1</span>
                                <div>
                                    <strong>Tell</strong>
                                    <p>Je d√©cide et j'informe</p>
                                </div>
                            </div>
                            <div class="level-item" data-level="2">
                                <span class="level-badge level-2">2</span>
                                <div>
                                    <strong>Sell</strong>
                                    <p>Je d√©cide et je convaincs</p>
                                </div>
                            </div>
                            <div class="level-item" data-level="3">
                                <span class="level-badge level-3">3</span>
                                <div>
                                    <strong>Consult</strong>
                                    <p>Je consulte puis d√©cide</p>
                                </div>
                            </div>
                            <div class="level-item" data-level="4">
                                <span class="level-badge level-4">4</span>
                                <div>
                                    <strong>Agree</strong>
                                    <p>Nous d√©cidons ensemble</p>
                                </div>
                            </div>
                            <div class="level-item" data-level="5">
                                <span class="level-badge level-5">5</span>
                                <div>
                                    <strong>Advise</strong>
                                    <p>Je conseille, tu d√©cides</p>
                                </div>
                            </div>
                            <div class="level-item" data-level="6">
                                <span class="level-badge level-6">6</span>
                                <div>
                                    <strong>Inquire</strong>
                                    <p>Tu d√©cides et m'informes</p>
                                </div>
                            </div>
                            <div class="level-item" data-level="7">
                                <span class="level-badge level-7">7</span>
                                <div>
                                    <strong>Delegate</strong>
                                    <p>Tu d√©cides en autonomie</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Session Info -->
                <div class="card session-info-card" id="sessionInfo" style="display: none;">
                    <div class="card-header session-info-header">
                        <div class="session-status-badge">
                            <span class="status-dot"></span>
                            <span>Session active</span>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="session-name-container">
                            <div class="session-icon">üéØ</div>
                            <div class="session-name" id="sessionName"></div>
                        </div>
                        <div id="participantsList"></div>
                    </div>
                </div>
            </aside>

            <!-- Main Zone -->
            <div class="main-zone">
                <!-- √âtat initial : Pas de session -->
                <div id="emptyState" class="empty-state">
                    <div class="empty-state-icon">üéØ</div>
                    <h2>Aucune session active</h2>
                    <p>Cr√©ez une nouvelle session pour commencer √† clarifier les responsabilit√©s avec votre √©quipe.</p>
                    <button class="btn btn-primary" onclick="document.getElementById('btnNewSession').click()">
                        Cr√©er une session
                    </button>
                </div>

                <!-- Zone active : Gestion des d√©cisions -->
                <div id="activeZone" style="display: none;">
                    <!-- Formulaire d'ajout de d√©cision -->
                    <div class="card">
                        <div class="card-header">
                            <h2>‚ûï Ajouter une d√©cision</h2>
                        </div>
                        <div class="card-body">
                            <form id="formAddDecision">
                                <div class="form-group">
                                    <input type="text" id="inputDecision"
                                        placeholder="Ex: Choix des technologies pour un nouveau composant" minlength="3"
                                        maxlength="200" required>
                                    <select id="selectCategory">
                                        <option value="technical">üîß Technique</option>
                                        <option value="organizational">üè¢ Organisationnel</option>
                                        <option value="product">üì¶ Produit</option>
                                        <option value="team">üë• √âquipe</option>
                                        <option value="other">üîÑ Autre</option>
                                    </select>
                                    <button type="submit" class="btn btn-primary">Ajouter</button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Liste des d√©cisions -->
                    <div id="decisionsList"></div>
                </div>
            </div>
        </div>
    </main>

    <!-- Explication de l'atelier -->
    <div class="workshop-explanation">
        <h3>üéØ Comment jouer ?</h3>
        <ol class="workshop-steps">
            <li><strong>Pr√©parez les situations</strong> : Listez des d√©cisions concr√®tes √† clarifier (ex: "Choix d'une
                nouvelle technologie")</li>
            <li><strong>Votez individuellement</strong> : Chaque participant choisit secr√®tement un niveau de d√©l√©gation
                (1-7)</li>
            <li><strong>R√©v√©lez simultan√©ment</strong> : Tous les votes sont d√©voil√©s en m√™me temps</li>
            <li><strong>Gagnez des points</strong> : Chaque joueur gagne des points selon sa carte, sauf la "minorit√©
                haute" (voir r√®gle ci-dessous)</li>
            <li><strong>Discutez les extr√™mes</strong> : Les votes les plus hauts et les plus bas expliquent leur
                raisonnement</li>
            <li><strong>Cr√©ez le Delegation Board</strong> : Visualisez le consensus pour chaque d√©cision</li>
        </ol>

        <div class="workshop-rule">
            <strong>üìú R√®gle de la Minorit√© Haute :</strong> Si un seul joueur vote 7 alors que les autres votent plus
            bas, son vote est √©cart√© (pas de points). L'objectif est de d√©l√©guer autant que possible, mais pas trop
            loin. Si 3-4 personnes votent 7, c'est la majorit√© et ils gagnent 7 points chacun.
        </div>

        <div class="workshop-consensus">
            <strong>ü§ù Qu'est-ce qu'un consensus ?</strong>
            <p>
                Le consensus n'est pas l'unanimit√©. C'est un <b>accord collectif</b> o√π chacun peut vivre avec la
                d√©cision prise,
                m√™me s'il ne s'agit pas de son premier choix.<br />
                Le consensus √©merge apr√®s discussion, o√π les participants √©coutent les diff√©rents points de vue et
                convergent vers une solution acceptable par tous.<br />
                Dans le Delegation Poker, le consensus se mat√©rialise souvent par la <b>m√©diane</b> des votes,
                repr√©sentant un √©quilibre entre les diff√©rentes perspectives.
            </p>
        </div>

    </div>

    <!-- Conseils de Coach -->
    <footer class="coach-tips">
        <div class="container">
            <h2>üí° Conseils</h2>

            <div class="tips-grid">
                <div class="tip-card">
                    <div class="tip-icon">üéØ</div>
                    <h3>Avant la session</h3>
                    <ul>
                        <li>Pr√©parez 5-10 d√©cisions concr√®tes et vari√©es</li>
                        <li>Choisissez des situations r√©elles v√©cues par l'√©quipe</li>
                        <li>M√©langez les cat√©gories (technique, organisationnel, produit)</li>
                        <li>Pr√©voyez 45-60 minutes pour une session compl√®te</li>
                    </ul>
                </div>

                <div class="tip-card">
                    <div class="tip-icon">üÉè</div>
                    <h3>Pendant les votes</h3>
                    <ul>
                        <li>Encouragez le vote instinctif (pas de sur-analyse)</li>
                        <li>Rappelez qu'il n'y a pas de "bon" niveau, seulement de la clarification</li>
                        <li>Observez les √©carts : un vote 2 vs 6 r√©v√®le une incompr√©hension</li>
                        <li>Laissez les extr√™mes s'exprimer en premier (min et max)</li>
                    </ul>
                </div>

                <div class="tip-card">
                    <div class="tip-icon">üí¨</div>
                    <h3>Faciliter les discussions</h3>
                    <ul>
                        <li>Posez des questions ouvertes : "Qu'est-ce qui t'a fait choisir ce niveau ?"</li>
                        <li>√âvitez de juger ou d'imposer un consensus trop vite</li>
                        <li>Cherchez les hypoth√®ses cach√©es derri√®re les votes</li>
                        <li>Acceptez qu'un consensus ne soit pas toujours possible imm√©diatement</li>
                    </ul>
                </div>

                <div class="tip-card">
                    <div class="tip-icon">üìà</div>
                    <h3>Apr√®s la session</h3>
                    <ul>
                        <li>Affichez le Delegation Board dans l'espace de travail</li>
                        <li>Revisitez-le tous les 3-6 mois (la d√©l√©gation √©volue)</li>
                        <li>Utilisez-le comme r√©f√©rence lors de nouvelles d√©cisions</li>
                        <li>C√©l√©brez les progr√®s vers plus d'autonomie</li>
                    </ul>
                </div>

                <div class="tip-card">
                    <div class="tip-icon">‚ö†Ô∏è</div>
                    <h3>Pi√®ges √† √©viter</h3>
                    <ul>
                        <li>Ne pas confondre d√©l√©gation et abandon (niveau 7 ‚â† "je m'en fiche")</li>
                        <li>√âviter les d√©cisions trop vagues ("G√©rer le projet")</li>
                        <li>Ne pas forcer un consensus artificiel pour "finir vite"</li>
                        <li>Attention aux biais hi√©rarchiques (le manager vote en dernier)</li>
                    </ul>
                </div>

                <div class="tip-card">
                    <div class="tip-icon">üé≠</div>
                    <h3>R√¥le du facilitateur</h3>
                    <ul>
                        <li>Expose les objectifs et le fonctionnement du groupe</li>
                        <li>Distribue la parole de mani√®re √©quilibr√©e</li>
                        <li>Instaure un climat de confiance et d'√©coute active</li>
                        <li>Maintient la neutralit√© et reste impartial</li>
                        <li>Favorise les questions ouvertes pour clarifier</li>
                        <li>Permet √† chacun d'aller au bout de son raisonnement</li>
                        <li>Reformule et transcrit la d√©cision adopt√©e</li>
                    </ul>
                </div>

                <div class="tip-card">
                    <div class="tip-icon">ü§ù</div>
                    <h3>Principes pour les participants</h3>
                    <ul>
                        <li>S'exprimer clairement, avec sinc√©rit√©</li>
                        <li>√ätre ouvert et r√©ceptif aux id√©es des autres</li>
                        <li>√âviter les paroles blessantes ou destructrices</li>
                        <li>Viser l'int√©r√™t g√©n√©ral, pas les attaques personnelles</li>
                        <li>Respecter les opinions de tous les participants</li>
                        <li>√ätre pr√™t √† apprendre et √† faire √©voluer ses positions</li>
                    </ul>
                </div>

                <div class="tip-card">
                    <div class="tip-icon">üöÄ</div>
                    <h3>Aller plus loin</h3>
                    <ul>
                        <li>Combinez avec le <strong>Delegation Board</strong> physique (post-its)</li>
                        <li>Explorez les <strong>7 niveaux</strong> avec des exemples concrets</li>
                        <li>Lisez "<a href="https://management30.com/practice/delegation-poker/" target="_blank"
                                rel="noopener noreferrer">Management 3.0</a>" de Jurgen Appelo</li>
                        <li>Partagez vos r√©sultats avec d'autres √©quipes</li>
                    </ul>
                </div>
            </div>

            <div class="coach-quote">
                <blockquote>
                    "La d√©l√©gation n'est pas binaire (tout ou rien). C'est un spectre de 7 nuances qui permet d'adapter
                    le niveau d'autonomie au contexte, aux comp√©tences et √† la maturit√© de l'√©quipe."
                    <footer>Jurgen Appelo, Management 3.0</footer>
                </blockquote>
            </div>
        </div>
    </footer>

    <!-- Modal : Nouvelle Session -->
    <div id="modalNewSession" class="modal" style="display: none;">
        <div class="modal-overlay" onclick="closeModal('modalNewSession')"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>üéØ Nouvelle session</h2>
                <button class="modal-close" onclick="closeModal('modalNewSession')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="formNewSession">
                    <div class="form-group-vertical">
                        <label for="inputSessionName">Nom de la session *</label>
                        <input type="text" id="inputSessionName" placeholder="Ex: √âquipe Produit - Sprint Planning"
                            required>
                    </div>
                    <div class="form-group-vertical">
                        <label for="inputParticipants">Participants (un par ligne) *</label>
                        <textarea id="inputParticipants" rows="5"
                            placeholder="Alice (PO)&#10;Bob (Dev)&#10;Charlie (SM)" required></textarea>
                        <small>Ajoutez les noms et r√¥les des participants</small>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeModal('modalNewSession')">
                            Annuler
                        </button>
                        <button type="submit" class="btn btn-primary">
                            Cr√©er la session
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal : Charger Session -->
    <div id="modalLoadSession" class="modal" style="display: none;">
        <div class="modal-overlay" onclick="closeModal('modalLoadSession')"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>üìÇ Charger une session</h2>
                <button class="modal-close" onclick="closeModal('modalLoadSession')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="sessionsList"></div>
            </div>
        </div>
    </div>

    <!-- Modal : Vote -->
    <div id="modalVote" class="modal" style="display: none;">
        <div class="modal-overlay" onclick="closeModal('modalVote')"></div>
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>üÉè Voter pour : <span id="voteDecisionText"></span></h2>
                <button class="modal-close" onclick="closeModal('modalVote')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="votingArea">
                    <!-- G√©n√©r√© dynamiquement -->
                </div>
                <div class="form-actions">
                    <button class="btn btn-secondary" onclick="closeModal('modalVote')">Annuler</button>
                    <button class="btn btn-primary" id="btnRevealVotes" disabled>
                        üé≠ R√©v√©ler les votes
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal : R√©sultats -->
    <div id="modalResults" class="modal" style="display: none;">
        <div class="modal-overlay" onclick="closeModal('modalResults')"></div>
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>üìä R√©sultats du vote</h2>
                <button class="modal-close" onclick="closeModal('modalResults')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="resultsArea"></div>
                <div class="form-group-vertical">
                    <label for="inputConsensusNotes">Notes de discussion (optionnel)</label>
                    <textarea id="inputConsensusNotes" rows="3" placeholder="R√©sum√© des √©changes..."></textarea>
                </div>
                <div class="form-actions">
                    <button class="btn btn-secondary" onclick="closeModal('modalResults')">Fermer</button>
                    <button class="btn btn-primary" id="btnSaveConsensus">
                        üíæ Enregistrer le consensus
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Templates -->
    <script src="js/templates.js"></script>

    <!-- Application principale -->
    <script src="js/app.js"></script>

    <!-- PocketBase Integration -->
    <script src="../../assets/js/pocketbase-manager.js"></script>
    <script src="js/pocketbase-integration.js"></script>

    <!-- Int√©gration Agile Coach Toolkit -->
    <script src="../../assets/js/tool-integration.js"></script>
    <script>
        // Configuration sp√©cifique √† l'outil
        window.TOOL_CONFIG = {
            name: 'delegation-poker',
            backUrl: '../../index.html#tools'
        };
    </script>
</body>

</html>