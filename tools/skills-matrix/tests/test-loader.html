<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Loader - Skills Matrix</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/notifications.css">
    <link rel="stylesheet" href="../css/import-prompt.css">
    <style>
        body {
            padding: 20px;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            background: rgba(26, 26, 46, 0.5);
            border-radius: 12px;
            border: 1px solid rgba(102, 126, 234, 0.2);
        }
        .test-section h2 {
            margin-top: 0;
            color: #00d4ff;
        }
        .test-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }
        .demo-controls {
            position: relative;
            background: rgba(26, 26, 46, 0.5);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid rgba(102, 126, 234, 0.2);
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .demo-mobile-menu {
            position: relative;
            background: rgba(26, 26, 46, 0.5);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid rgba(102, 126, 234, 0.2);
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ Test du Loader - Skills Matrix</h1>
        
        <!-- Test Loader Desktop -->
        <div class="test-section">
            <h2>Loader Desktop (Controls)</h2>
            <div class="demo-controls" id="demoControls">
                <p>Zone de contr√¥les (desktop)</p>
                
                <!-- Loader Controls -->
                <div class="controls-loader" id="controlsLoader">
                    <div class="controls-loader-spinner"></div>
                    <div class="controls-loader-text" id="controlsLoaderText">Chargement...</div>
                </div>
            </div>
            
            <div class="test-buttons">
                <button class="btn" onclick="testControlsLoader('üì• Export JSON...')">
                    Test Export JSON
                </button>
                <button class="btn" onclick="testControlsLoader('üìä Export Excel...')">
                    Test Export Excel
                </button>
                <button class="btn" onclick="testControlsLoader('üíæ Sauvegarde...')">
                    Test Sauvegarde
                </button>
                <button class="btn" onclick="testControlsLoader('üîÑ R√©initialisation...')">
                    Test R√©initialisation
                </button>
                <button class="btn btn-danger" onclick="hideControlsLoader()">
                    Masquer Loader
                </button>
            </div>
        </div>
        
        <!-- Test Loader Mobile -->
        <div class="test-section">
            <h2>Loader Mobile (Menu)</h2>
            <div class="demo-mobile-menu" id="demoMobileMenu">
                <p>Zone menu mobile</p>
                
                <!-- Loader Mobile -->
                <div class="mobile-menu-loader" id="mobileMenuLoader">
                    <div class="mobile-menu-loader-spinner"></div>
                    <div class="mobile-menu-loader-text" id="mobileMenuLoaderText">Chargement...</div>
                </div>
            </div>
            
            <div class="test-buttons">
                <button class="btn" onclick="testMobileLoader('üì§ Import JSON...')">
                    Test Import JSON
                </button>
                <button class="btn" onclick="testMobileLoader('üìà Import Excel...')">
                    Test Import Excel
                </button>
                <button class="btn" onclick="testMobileLoader('üìù Export Markdown...')">
                    Test Export Markdown
                </button>
                <button class="btn btn-danger" onclick="hideMobileMenuLoader()">
                    Masquer Loader
                </button>
            </div>
        </div>
        
        <!-- Test Loader Automatique -->
        <div class="test-section">
            <h2>Loader Automatique (D√©tection Desktop/Mobile)</h2>
            <p>Utilise <code>showLoader()</code> qui d√©tecte automatiquement le contexte.</p>
            
            <div class="test-buttons">
                <button class="btn btn-success" onclick="testAutoLoader('üì• Export automatique...')">
                    Test Loader Auto
                </button>
                <button class="btn btn-success" onclick="testAutoLoaderWithDelay('üíæ Sauvegarde avec d√©lai...', 2000)">
                    Test avec d√©lai 2s
                </button>
                <button class="btn btn-danger" onclick="hideLoader()">
                    Masquer tous les loaders
                </button>
            </div>
        </div>
        
        <!-- Test Notifications -->
        <div class="test-section">
            <h2>Notifications</h2>
            <p>Test des diff√©rents types de notifications.</p>
            
            <div class="test-buttons">
                <button class="btn btn-success" onclick="showNotification('‚úÖ Op√©ration r√©ussie', 'success')">
                    Success
                </button>
                <button class="btn" onclick="showNotification('‚ùå Une erreur est survenue', 'error')">
                    Error
                </button>
                <button class="btn" onclick="showNotification('‚ÑπÔ∏è Information importante', 'info')">
                    Info
                </button>
                <button class="btn" onclick="showNotification('‚ö†Ô∏è Attention requise', 'warning')">
                    Warning
                </button>
            </div>
        </div>
        
        <!-- Test Sc√©nario Complet -->
        <div class="test-section">
            <h2>Sc√©nario Complet (Loader + Notification)</h2>
            <p>Simule une action compl√®te avec loader et notification de r√©sultat.</p>
            
            <div class="test-buttons">
                <button class="btn btn-success" onclick="testCompleteScenario('success')">
                    Sc√©nario Succ√®s
                </button>
                <button class="btn" onclick="testCompleteScenario('error')">
                    Sc√©nario Erreur
                </button>
            </div>
        </div>
        
        <!-- Test Prompt d'Import -->
        <div class="test-section">
            <h2>Prompt d'Import</h2>
            <p>Message temporaire apr√®s import demandant si l'utilisateur souhaite sauvegarder.</p>
            
            <div class="test-buttons">
                <button class="btn" onclick="testImportPrompt('JSON')">
                    Test Prompt JSON
                </button>
                <button class="btn" onclick="testImportPrompt('Excel')">
                    Test Prompt Excel
                </button>
                <button class="btn btn-danger" onclick="hideImportPrompt()">
                    Masquer Prompt
                </button>
            </div>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="../js/loader.js"></script>
    <script src="../js/import-prompt.js"></script>
    <script>
        // Fonction showNotification pour les tests
        function showNotification(message, type = 'success', duration = 3000) {
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.classList.add('notification-exit');
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, duration);
        }
        
        // Test loader controls
        function testControlsLoader(message) {
            showControlsLoader(message);
        }
        
        // Test loader mobile
        function testMobileLoader(message) {
            showMobileMenuLoader(message);
        }
        
        // Test loader automatique
        function testAutoLoader(message) {
            showLoader(message);
        }
        
        // Test loader avec d√©lai
        function testAutoLoaderWithDelay(message, delay) {
            showLoader(message);
            setTimeout(() => {
                hideLoader();
                showNotification('‚úÖ Op√©ration termin√©e', 'success');
            }, delay);
        }
        
        // Test sc√©nario complet
        function testCompleteScenario(type) {
            showLoader('üíæ Traitement en cours...');
            
            setTimeout(() => {
                hideLoader();
                
                if (type === 'success') {
                    showNotification('‚úÖ Op√©ration r√©ussie avec succ√®s', 'success');
                } else {
                    showNotification('‚ùå Une erreur est survenue', 'error');
                }
            }, 2000);
        }
        
        // Test prompt d'import
        function testImportPrompt(type) {
            showImportPrompt(type);
        }
        
        // Mock de saveData pour les tests
        function saveData(sync) {
            console.log('Mock saveData appel√© avec sync =', sync);
        }
        
        console.log('‚úÖ Test loader initialis√©');
    </script>
</body>
</html>
